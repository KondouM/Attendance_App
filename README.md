# 勤怠管理WEBアプリ設計書
http://157.7.205.18/attendance.html

## 1. 概要
### 1.1. プロジェクト名
勤怠管理WEBアプリ

### 1.2. 目的
社内での勤怠管理を効率化し、管理・分析を容易にするためのWEBアプリケーションを提供する。

### 1.3. 対象ユーザー
社員および管理者

## 2. 要件定義
### 2.1. 機能要件
#### 社員機能
- 出勤打刻
- 退勤打刻
- 勤怠データの閲覧

#### 管理者機能
- 社員の勤怠データ管理
- 勤怠データの集計とレポート作成
- 社員情報の登録・編集・削除
- 権限管理

### 2.2. 非機能要件
#### セキュリティ
- 認証・認可の実装（例: JWT、OAuth）
- データの暗号化（HTTPS、DB暗号化）

#### パフォーマンス
- 高速なレスポンス時間
- 高可用性

#### スケーラビリティ
- 将来的なユーザー増加に対応可能な設計

## 3. アーキテクチャ設計
### 3.1. システム構成図
- フロントエンド: Next.js
- バックエンド: Next.js APIルート、Prisma（ORM）
- データベース: PostgreSQL
- 認証・認可: next-auth
- デプロイ: Vercel

### 3.2. コンポーネント図
#### フロントエンドコンポーネント
- 打刻フォームコンポーネント
- 勤怠データ表示コンポーネント
- レポート表示コンポーネント

#### バックエンドAPI
- `/api/clock-in`: 出勤打刻API
- `/api/clock-out`: 退勤打刻API
- `/api/attendance`: 勤怠データ取得API
- `/api/admin`: 管理者用API

## 4. データベース設計
### 4.1. ER図
![alt text](image.png)

### 4.2. テーブル定義

## Employees テーブル

| 列名     | データ型   | 説明                                           |
|----------|------------|------------------------------------------------|
| id       | INT        | 主キー (プライマリキー)                        |
| name     | VARCHAR    | 社員の名前                                    |
| email    | VARCHAR    | 社員のメールアドレス                          |
| password | VARCHAR    | 社員のパスワード（暗号化された形式で保存）     |
| role     | ENUM       | 社員の役割（一般社員または管理者）              |

## Attendance テーブル

| 列名         | データ型   | 説明                        |
|--------------|------------|-----------------------------|
| id           | INT        | 主キー (プライマリキー)     |
| employee_id  | INT        | 外部キー (Employees.id)    |
| clock_in     | DATETIME   | 出勤時刻                    |
| clock_out    | DATETIME   | 退勤時刻                    |

## 5. API設計
### 5.1. エンドポイント定義
#### POST `/api/clock-in`
- 概要: 出勤打刻を行う
- リクエストボディ: `{ "employee_id": "123", "timestamp": "2024-07-24T08:00:00Z" }`
- レスポンス: `{ "message": "出勤打刻成功" }`

#### POST `/api/clock-out`
- 概要: 退勤打刻を行う
- リクエストボディ: `{ "employee_id": "123", "timestamp": "2024-07-24T17:00:00Z" }`
- レスポンス: `{ "message": "退勤打刻成功" }`

#### GET `/api/attendance`
- 概要: 勤怠データを取得する
- クエリパラメータ: `employee_id`
- レスポンス: `[ { "clock_in": "2024-07-24T08:00:00Z", "clock_out": "2024-07-24T17:00:00Z" } ]`

## 6. 画面設計
### 6.1. 画面一覧
- ログイン画面
- ダッシュボード画面
- 出勤打刻画面
- 退勤打刻画面
- 勤怠データ閲覧画面
- 管理者画面

### 6.2. 画面遷移図
（画面遷移図をここに配置）

### 6.3. 画面ワイヤーフレーム
（ワイヤーフレームをここに配置）

## 7. 開発・テスト計画
### 7.1. 開発スケジュール
（開発スケジュールをここに記載）

### 7.2. テスト計画
- ユニットテスト
- インテグレーションテスト
- エンドツーエンドテスト

## 8. デプロイ・運用計画
### 8.1. デプロイ手順
- GitHubリポジトリの作成
- Vercelとの連携
- 自動デプロイの設定

### 8.2. 運用・保守
- モニタリング
- バックアップ
- セキュリティアップデート
